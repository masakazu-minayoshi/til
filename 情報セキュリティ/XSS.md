# XSS（クロスサイトスクリプティング）  
## XSS（クロスサイトスクリプティング）とは？  
* ユーザからの入力内容をWebページに表示するWebアプリケーションに(掲示板サイトやTwitter)おいて、<br>ウェブサイト（標的サイト）の脆弱性(XSS脆弱性)を利用した攻撃手法を指す。  
(例) HTML生成の実装に問題があると    
* 外部よりスクリプトを埋め込まれクッキーを盗まれる可能性がある。    
* JavaScriptを埋め込むことによって実現する攻撃。<br>JavaScriptで実現可能なすべての攻撃手法を被る可能性がある。  


[![Image from Gyazo](https://i.gyazo.com/e9b1410cc3df11de82263b86cf6747e5.png)](https://gyazo.com/e9b1410cc3df11de82263b86cf6747e5)
(スクリプトの例)  
Javascriptで記述することが可能なすべての攻撃を受けてしまう可能性がある。  
* cookieを攻撃者のサーバに送信されてしまう。  
* マルウェア(悪意のあるソフトウェア)を仕込んであるサイトにリダイレクトされウイルスに感染させられる。  

## XSSの対策  
### 一般的な対策方法  
* XSSが発生する主要因として、フォームから入力されたHTMLタグが、<br>そのままページに反映されてしまっていることがあげられる。  
* XSSを防ぐにはHTML生成時に意味を持つ特殊文字列を文字参照によりエスケープする。  

#### 文字参照  
* HTML上で直接記述できない特殊文字を表記する際に用いられる記法。  
(例)  
HTML中に「<」もしくは「>」と記述するとこの二つはタグの初め、終わりと認識される。  
これでは文字列として上記の記号を用いることができない。そこで、文字参照を利用します。    

* XSSを対策する際にエスケープすべき特殊文字の一覧  
→特殊文字を文字参照に変換して保存すれば、外部から埋め込まれたスクリプトが実行されることはない。

|変換前|変換後|
|:--:|:--|
|<	|& lt;|
|>	|& gt;|
|&	|& amp;|
|"	|& quot;|
|'	|& #39;|

### RailsでのXSS対策方法  
* rawメソッド:文字列を文字参照にエスケープしないためのヘルパーメソッド。  
```
(例)
raw(文字列)
```











> 参考  
[クロスサイトスクリプティング（XSS）のセキュリティ対策とは？](https://www.shadan-kun.com/blog/measure/1052/#:~:text=%E3%82%AF%E3%83%AD%E3%82%B9%E3%82%B5%E3%82%A4%E3%83%88%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0%EF%BC%88XSS%EF%BC%89%E3%81%A8%E3%81%AF%E3%80%81%E6%8E%B2%E7%A4%BA%E6%9D%BF%E3%82%B5%E3%82%A4%E3%83%88%E3%82%84,%E6%94%BB%E6%92%83%E6%89%8B%E6%B3%95%E3%82%92%E6%8C%87%E3%81%97%E3%81%BE%E3%81%99%E3%80%82)
